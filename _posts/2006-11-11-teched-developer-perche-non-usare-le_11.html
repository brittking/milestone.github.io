---
layout: post
title: TechEd Developer - Perchè non usare le Stored Procedure
date: '2006-11-11T15:02:00.001+01:00'
author: Mauro Servienti
tags:
- Why not...
modified_time: '2012-01-25T11:42:40.572+01:00'
blogger_id: tag:blogger.com,1999:blog-6511237790974218081.post-6410572414608043878
blogger_orig_url: http://milestone.topics.it/2006/11/teched-developer-perche-non-usare-le_11.html
---

<span>Facciamo un po' di chiarezza sugli ultimi commenti che sia <a href="http://blogs.ugidotnet.org/topics/archive/2006/11/10/54333.aspx" target="_blank">io</a> che <a href="http://blogs.ugidotnet.org/raffaele/archive/2006/11/10/54331.aspx" target="_blank">Raff</a> abbiamo postato riguardo all'uso di stored procedure...</span><br> <span><u><em>Contesto</em></u><br><em>Sessione di Ingo Rammer sul tuning e l'analisi delle performance in applicazioni distribuite.</em></span><br> <span><em>Rammer ha analizzato tutte le possibili cause che portano a problemi di performance in applicazioni distribuite e alla fine parlando dell'accesso ai dati ha detto che le stored procedure non devono essere usate perchè generano un sacco di traffico di rete inutile.</em></span><br> <span><u>Considerazioni</u><br>Lo scenario di Rammer si inserisce in un contesto in cui ad esempio carico la mai entity "Customer" eseguo la modifica di un solo valore e aggiorno il db usando una sola sp mi ritrovo a passare tutti i dati presenti nella mia entity alla stored procedure generando quindi del traffico di rete inutile, l'uso di uno statement sql creato ad hoc, come del resto fanno i principali ORM, permette di gestire in maniera molto più granulare la situazione.</span><br> <span>L'uso di uno statement specifico che si preocupa di aggiornare i soli dati realmente modificati permette inoltre di gestire meglio la concorrenza ottimistica nel caso in cui, ad esempio, il client X modifichi la <em>Ragione Sociale</em> mentre il client Y modifichi l'<em>indirizzo</em> della ns entity, in un caso come questo potrebbe non avere senso gestire la concorrenza ma basterebbe semplicemente accettare le 2 modifiche che non sono "<em>concorrenziali</em>".</span><br> <span>In quest'ottica l'uso di sp porta ad un calo di performance dovuto proprio al traffico di rete inutile, l'unica soluzione sarebbe quella di avere tante sp quante sono le combinazioni possibili di parametri in ingresso, impensabile.</span><br> <span>Per tutto le altre operazioni su db le sp vanno più che bene e lo stesso Rammer non ha fatto commenti di sorta, resta però doveroso leggersi questo:<br><a title="http://msdn.microsoft.com/msdnmag/issues/06/11/SQLSecurity/default.aspx" href="http://msdn.microsoft.com/msdnmag/issues/06/11/SQLSecurity/default.aspx">http://msdn.microsoft.com/msdnmag/issues/06/11/SQLSecurity/default.aspx</a></span><br> <span>.m</span><br>