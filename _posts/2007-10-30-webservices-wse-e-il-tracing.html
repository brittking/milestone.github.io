---
layout: post
title: WebServices, WSE e il tracing...
date: '2007-10-30T10:00:00.000+01:00'
author: Mauro Servienti
tags:
- Why not...
modified_time: '2012-01-27T15:43:06.066+01:00'
blogger_id: tag:blogger.com,1999:blog-6511237790974218081.post-2375715343574486566
blogger_orig_url: http://milestone.topics.it/2007/10/webservices-wse-e-il-tracing.html
---

<span>Sto scrivendo un Servizio che, se tutto va come deve andare, verrà esposto al mondo pubblico. Il servizio per garantire la fruibilità dal maggior numero di linguaggi possibili viene erogato in varie versioni:</span><br> <ul> <li>WebService SOAP: il più tradizionale, vengono erogate le funzionalità indispensabili (1) e l'autenticazione viene gestita con un meccanismo custom basato su SoapHeader, l'idea è quella di garantire il canale con SSL;  </li><li>WSE3 e WCF: le funzionalità avanzate di BackOffice e Amministrazione, oltre che quelle di base, sono erogate sia attraverso WSE3.0 che WCF;</li></ul> <span>ed è proprio WSE3.0 che ieri mi ha dato un bel po' di grattacapi, stavo facendo un po' di Load Testing, mi sono costruito un paio di applicazioni console che martellano il servizio di richieste e praticamente era un disastro... dopo poche (veramente poche) richieste il servizio cominciava a vacillare e ne venivano perse nel nulla un sacco, all'inizio panico soprattutto perchè neanche sul client ricevevo la benchè minima Exception, nulla di nulla, semplicemente almeno il 30% delle richieste finivano nel nulla.</span><br> <span>Alla fine ho scoperto che la causa era proprio WSE o meglio il tracing di WSE che era abilitato (lo avevo abilitato tempo fa all'inizio dello sviluppo) e ormai il file di trace era un po' grosso (450Mb circa) facendo andare in bomba tutto...</span><br> <span>Ma la cosa più subdola è stata che dall'editor dei settings di WSE il tracing risultava disabilitato! nulla di più falso... il problema alla fine è che l'editor dei settings di WSE non va molto d'accordo con gli Web Application Project di VS2005 e quindi scrive i sui settaggi in un file app.config e non nel file web.config... maledetto lui.</span><br> <span>Disabilitato il tracing di WSE il servizio a ripreso a scheggiare come un missile senza perdersi per strada nulla, molto bene!</span><br> <span>Ne approfitto per fare anche io una considerazione sul <a href="http://blog.vivendobyte.net/archive/2007/10/29/326.aspx" target="_blank">post</a> di <a href="http://blog.vivendobyte.net/" target="_blank">Igor</a> e di conseguenza su <a href="http://blogs.ugidotnet.org/Crad/archive/2007/10/30/wcf-dto-fatture-e-rapportinomaker-tm.aspx" target="_blank">quello</a> di <a href="http://blogs.ugidotnet.org/Crad" target="_blank">Marco De Sanctis</a>: quoto in pieno le considerazioni di Marco sui DTO e mi spingo ancora un po' più in la, nei servizi che sto sviluppando non ho la più pallida idea di chi potranno essere i client e la scelta è stata di ridurre all'osso la complessità dei DTO eliminando anche molti dei tipi (nei DTO) che potrebbero portare a problemi. Ad esempio il Business Object lato server ha una proprietà di tipo Guid questa viene passata atteraverso un DTO sotto forma di stringa e viene documentato che dovrebbe essere trattata come un Guid, stessa sorte per i tipi DateTime che vengono convertiti in stringhe in formato UTC.</span><br> <span>Tutto questo non per criticare le scelte di Igor, anzi, ma semplicemente per dire che nel momento in cui ci si deve spingere verso la piena interoperabilità è necessario prevedere anche le situazioni più estreme.</span><br> <span>.m</span><br>