---
layout: post
title: Running RavenDB on Windows Azure using a Virtual Machine
date: '2012-11-15T13:06:00.000+01:00'
author: Mauro Servienti
tags:
- RavenDB
- Azure
modified_time: '2012-11-15T13:06:00.320+01:00'
thumbnail: http://lh5.ggpht.com/-rToTjU4GHBE/UJ5K2Euy_rI/AAAAAAAACT8/MvNTBB3LIsE/s72-c/image_thumb%25255B5%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-6511237790974218081.post-8088580374690520973
blogger_orig_url: http://milestone.topics.it/2012/11/running-ravendb-on-windows-azure-using.html
permalink: /2012/11/running-ravendb-on-windows-azure-using.html
---

<p>We <a href="{{ site.baseurl }}{% post_url 2012-11-07-running-ravendb-as-windows-azure-worker %}">have seen</a> how to run <a href="http://ravendb.net/" target="_blank">RavenDB</a> on Windows <a href="http://www.windowsazure.com/" target="_blank">Azure</a> using a Worker Role, today I decided to try to setup RavenDB using a Virtual Machine, a Windows Server 2012 Medium Seized VM.</p> <p>The first step is obviously to create the VM, once connected to Azure management portal I started the VM creation wizard:</p> <p><a href="http://lh4.ggpht.com/-1ELUhtrLmwc/UJ5K0rybJhI/AAAAAAAACT0/W0TRyOkPZqs/s1600-h/image%25255B6%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://lh5.ggpht.com/-rToTjU4GHBE/UJ5K2Euy_rI/AAAAAAAACT8/MvNTBB3LIsE/image_thumb%25255B5%25255D.png?imgmax=800" width="244" height="112"></a></p> <p>Choosing to create a VM selected from the built-in image gallery, and choosing as the guest OS Windows Server 2012.</p> <p><a href="http://lh4.ggpht.com/-bUZD_k23Ktk/UJ5K3qsfxPI/AAAAAAAACUE/_ATP9trXNPg/s1600-h/image%25255B9%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://lh5.ggpht.com/-eYreWSZwVcQ/UJ5K5BJKc2I/AAAAAAAACUM/JKdcWZArMXM/image_thumb%25255B6%25255D.png?imgmax=800" width="244" height="190"></a></p> <p>The next step is to define some information about the VM such as the name, the administrator’s credentials and the size of the VM</p> <p><a href="http://lh6.ggpht.com/-FSQZ4YFHuus/UJ5K6bEaIhI/AAAAAAAACUQ/03KaZKSC3Uw/s1600-h/image%25255B12%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://lh3.ggpht.com/-GTfGS02XyHY/UJ5K7ZbDRHI/AAAAAAAACUc/xkWX3kzZ9DA/image_thumb%25255B7%25255D.png?imgmax=800" width="225" height="244"></a></p> <p>Currently the size of the VM is important other then for performance reasons for the number of hard disks you can attach to the VM, the big is the VM the highest is the number of the HDs you can attach.</p> <p><a href="http://lh3.ggpht.com/-xLg0gjBwUrE/UJ5K8reCwxI/AAAAAAAACUk/AUlnVh7YN-8/s1600-h/image%25255B22%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://lh6.ggpht.com/-APOk4W8AHPQ/UJ5K94oQY_I/AAAAAAAACUs/9J8zsGajcMA/image_thumb%25255B14%25255D.png?imgmax=800" width="244" height="149"></a><a href="http://lh6.ggpht.com/-yaMAsCfjV28/UJ5K-8fYyCI/AAAAAAAACUw/mSsv-w8I7ag/s1600-h/image%25255B27%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://lh5.ggpht.com/-3ePQuY06VW8/UJ5K_jQcQrI/AAAAAAAACU4/7kiv1N0m0JI/image_thumb%25255B19%25255D.png?imgmax=800" width="253" height="149"></a></p> <p>I finally configure the VM as a standalone VM since currently is alone and created a new availability set, that basically is a sort of logical grouping of resources.</p> <p>After that the VM creation process has finished the VM provisioning, it took something like 10 minutes, I created 2 Virtual Hard Drives and attached them to the VM.</p> <p><a href="http://lh4.ggpht.com/-pPzjzQDcYD4/UJ5LAi3L_EI/AAAAAAAACVE/haflLf5jDP8/s1600-h/image%25255B21%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://lh4.ggpht.com/-yfdRZb9gAtw/UJ5LCJsxEAI/AAAAAAAACVM/08x58r2IOL8/image_thumb%25255B10%25255D.png?imgmax=800" width="244" height="234"></a></p> <p>From now on the process is exactly the same you can do on a stand alone server:</p> <ul> <li>I RDP into the server;  <li>Installed IIS;  <li>Since it is a Windows Server 2012 I configured the 2 VHDs as a storage pool in striping mode;  <li>Downloaded and installed RavenDB as a web application;  <li>Configured Windows Authentication;  <li>Configured RavenDB to put the “data” directory onto the storage pool; </li></ul> <p>easy peasy :-)</p> <p>One last important thing, if you want to access the RavenDB site from outside of the Azure datacenter you need to configure an endpoint for the protocol and port:</p> <p><a href="http://lh5.ggpht.com/-uMDPjTQ9vB8/UJ5LC2iPwVI/AAAAAAAACVQ/IeDlKSAy3mg/s1600-h/image%25255B31%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://lh4.ggpht.com/-s61f2L6DcDE/UJ5LD9sSTYI/AAAAAAAACVY/jl-KsgBNTfI/image_thumb%25255B21%25255D.png?imgmax=800" width="391" height="70"></a></p> <p>By default there is only the RDP stuff. The interesting thing is that you are basically configuring the port forwarding on the Azure software load balancer…so you can use that feature to easily switch environments on a single VM…interesting.</p> <p>.m</p>  
