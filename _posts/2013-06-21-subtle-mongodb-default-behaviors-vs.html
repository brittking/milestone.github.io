---
layout: post
title: 'Subtle MongoDB default behaviors vs. RavenDB: indexes requirements'
date: '2013-06-21T11:32:00.000+02:00'
author: Mauro Servienti
tags:
- MongoDB
- Software Mason
- RavenDB
modified_time: '2013-06-21T11:32:00.562+02:00'
blogger_id: tag:blogger.com,1999:blog-6511237790974218081.post-4117205693510240615
blogger_orig_url: http://milestone.topics.it/2013/06/subtle-mongodb-default-behaviors-vs.html
permalink: /2013/06/subtle-mongodb-default-behaviors-vs.html
---

<p>One of the amazing things of dealing with a document db is the simple fact that you do not need to care at all of the document db itself, you just put documents and get documents, by id or using a query, and <strong>it just works</strong>.</p> <h4>Well…it should…unless…</h4> <p>There is a weird default behavior of MongoDB that I do not really like: you can issue a query on a collection without the need to define an index, it just works (I suppose doing some sort of full-collection-scan) and you get documents back as expected, unless the size of the collection overlaps a certain dimension after which an index for that type of query must be defined otherwise an error is raised at query time.</p> <p>The weird thing is that not being forced to define the index raise its problem only in production after a certain amount of time and maybe only under specific circumstances, making in some scenarios pretty hard to understand why something is not working as expected.</p> <p>On the other side, <a href="http://ravendb.net/" target="_blank">RavenDB</a>, fully embracing the “eventually consistent” world <strong>requires</strong> an index to solve a query and the wonderful (at least at development time) thing is that you do not need to manually define indexes, even if it is highly suggested, but that is another story, because the database engine can deduct (and create if not existing) indexes requirements analyzing the query at runtime.</p> <p>I don’t like surprises under my feet that’s why I don’t like that specific MongoDB behavior.</p> <p>.m</p>  
