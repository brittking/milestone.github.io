---
layout: post
title: Meticolosità e Organizzazione
date: '2009-10-23T11:47:00.000+02:00'
author: Mauro Servienti
tags:
- Visual Studio
modified_time: '2012-08-04T19:44:53.354+02:00'
thumbnail: https://lh4.googleusercontent.com/-kOcpwmjovho/TyvNGvFy8SI/AAAAAAAAAzg/1iZPBLVksrM/s72-c/image_thumb_2.png
blogger_id: tag:blogger.com,1999:blog-6511237790974218081.post-5130062215478964635
blogger_orig_url: http://milestone.topics.it/2009/10/meticolosita-e-organizzazione.html
---

<span>Tutto ha un inizio e se iniziamo <em>bene siamo già a metà dell’opera</em>, questo recita un vecchio adagio… nel nostro caso non siamo proprio a metà dell’opera ma iniziare bene è essenziale.</span><br>  <span>Cosa succede quando dobbiamo avviare un nuovo progetto? tipicamente apriamo Visual Studio e creiamo un nuovo progetto del tipo che più ci piace :-) pessima scelta perchè se il “robo” che state creando deve vivere ed essere manutenuto vi siete già tagliati le gambe :-)</span><br>  <span>Perchè? perchè Visual Studio ha una serie di “vizi” che su un progetto corposo diventano un problema, una prima cosa è quindi la struttura su <em>file system</em>:</span><br>  <span><a href="https://lh4.googleusercontent.com/-Ohu0-qZFNkk/TyvNHNz4-pI/AAAAAAAAAzk/6HgAqjkI7xI/image_6.png" rel="lightbox"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="https://lh4.googleusercontent.com/-kOcpwmjovho/TyvNGvFy8SI/AAAAAAAAAzg/1iZPBLVksrM/image_thumb_2.png" width="244" height="190"></a> </span><br>  <blockquote>   <span>ndr: se volete le informazione sullo stato del source control come nello screenshot, simil <em>Tortoise*</em>, vi servono questi: <a href="http://www.microsoft.com/DOWNLOADS/details.aspx?familyid=FBD14EEA-781F-45A1-8C46-9F6BA2F68BF0&displaylang=en">Team Foundation Server Power Tools</a>, che vi danno anche un sacco di altri goodies… :-)</span><br> </blockquote>  <span>La prima cosa che faccio è quindi creare la struttura delle folder, che hanno questo scopo:</span><br>  <ul>   <li><strong>Run</strong>: la root del progetto, tipicamente il nome corrisponde anche al codename, ma è un dettaglio;</li>    <ul>     <li><strong>Baseline</strong>: questa c’è sempre! baseline contiene il nostro mondo è la trunk del progetto, la volete chiamare trunk, chiamatela trunk :-): perchè serve? perchè come si vede nell’esempio (dev10b2-branch) se facciamo delle branch le possiamo tenere in parallelo all’interno della root del progetto avendo sempre tutto sotto controllo; poi…in ordine alfabetico:</li>      <ul>       <li><strong>build</strong>: nonostante il nome non serve solo a quello, abbiate pazienza ci arriveremo; per ora sappiate che ci serve ed è “vuota”, o meglio contiene come minimo 2 subfolder <u>vuote</u>:</li>        <ul>         <li><em>debug</em>;</li>          <li><em>release</em>;</li>       </ul>        <li><strong>data</strong>: se, e ripeto se, il progetto ha una base dati diversa da un database server, in questo esempio SqlCompact, li ci metto il db; in altri casi ci possono finire gli script sql che servono per generare un set di dati inizale o di base necessari per il corretto fuinzionamento del prodotto, i tipici “default”;</li>        <li><strong>doc</strong>: questa è abbastanza opzionale, essendo io tipicamente un remote user con scarsa connettività ho bisogno di un posto in cui tenere la documentazione che non richieda l’always-on come SharePoint, qui ci metto anche i file di Excel con le versioni off-line degli WorkItem di TFS;</li>        <li><strong>lib</strong>: contiene *tutte* le libraries nostre o di terze parti da cui il progetto dipende;</li>        <li><strong>res</strong>: contiene le risorse in forma grezza, un esempio banale? “Splashscreen.psd” quindi il file di Photoshop che poi diventerà lo Splashscreen dell’applicazione;</li>        <li><strong>src</strong>: tutti, e ripeto tutti, i progetti di Viusal Studio, i sorgenti, i progetti della db pro e chi più ne ha più ne metta;</li>        <li><strong>TestResults</strong>: “ignore”, generata da Visual Studio per metterci i risulatati dei test, va bene così;</li>        <li><strong>us</strong>: le sole “User Story”, può essere tranquillamente mergiata con “doc”;</li>     </ul>   </ul> </ul>  <span>Creata la struttura delle cartelle il primo passo è piazzare il tutto sotto source control, e anche questo è condito da un piccolo inghippo:</span><br>  <ul>   <li>creiamo un nuovo Workspace per il nostro progetto;</li> </ul>  <span>e qui ci incastriamo…</span><br>  <span><a href="https://lh6.googleusercontent.com/-CMAYy4SFPuQ/TyvNIWFtm2I/AAAAAAAAAz4/MRiqlQrqzQ0/image_8.png" rel="lightbox"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="https://lh4.googleusercontent.com/-65MSwdTL27Q/TyvNHoR2RuI/AAAAAAAAAzs/9jtn7i5k_9U/image_thumb_3.png" width="244" height="134"></a> </span><br>  <blockquote>   <span><em>ndr</em>: i Workspace hanno come “chiave” il nome del workspace stesso, il nome dell’utente e il nome del computer, ma nonostante questo non potete creare su macchine diverse workspace con lo stesso nome… ergo consiglio… il nome del workspace per me è: “<em>nome progetto</em>” + on "+ “<em>nome macchina</em>”.</span><br> </blockquote>  <span>Il problema reale però è un altro: per mappare un workspace su una cartella locale avete bisogno di poter creare la struttura delle folder, in realtà basta e avanza la “<em>baseline</em>”, sul server ma per poterlo fare avete bisogno del workspace, togo :-)</span><br>  <span>Quindi? addomestichiamolo! tanto è da fare solo una tantum alla creazione del progetto:</span><br>  <ul>   <li>Creaimo la solution vuota:</li> </ul>  <span><a href="https://lh6.googleusercontent.com/-KD08U9ZVrbQ/TyvNKOVewkI/AAAAAAAAA0I/os3cKQZIJl8/image_10.png" rel="lightbox"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="https://lh6.googleusercontent.com/-EnwEPcc2Fv8/TyvNJLRqh1I/AAAAAAAAAz8/7Pn_zbAbOec/image_thumb_4.png" width="244" height="199"></a> </span><br>  <ul>   <li>Visual studio ha il brutto vizio, in questo caso, di obbligarvi a creare una folder per la solution e di dare come nome della folder quello della solution… benedetto lui :-)</li>    <li>Quindi chiamiamo la solution “trunk” o “baseline”;</li>    <li>Creiamola;</li>    <li>Chiudiamo Visual Studio;</li>    <li>Andiamo su filesystem e rinominiamo il file <em>trunk.sln</em>, il file *.suo lo possiamo cancellare per ora non ci serve a nulla, dandogli il nome che abbiamo scelto per il nostro progetto;</li>    <li>Riapriamo la solution;</li>    <li>Dal TeamExplorer creiamo un Workspace per la nostra solution senza definire nessun mapping; </li>    <li>click con il destro sulla solution e “Add to source control…” e anche in questo caso diamo un paio di martellate qua e la :-):</li> </ul>  <span><a href="https://lh4.googleusercontent.com/-87NEuCiA8ZA/TyvNL8ZF8II/AAAAAAAAA0Y/bY9EjxcIZ-U/image_12.png" rel="lightbox"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="https://lh5.googleusercontent.com/-g0pWzi5SLck/TyvNKjnfMrI/AAAAAAAAA0Q/KVdOXZxinUs/image_thumb_5.png" width="244" height="242"></a> </span><br>  <span>Come si vede simpatia TeamExplorer decide che il nome della folder su TFS debba essere il nome della solution, ma a noi non va bene e non è solo quello:</span><br>  <ul>   <li>primissima cosa: selezionate il workspace corretto!</li>    <li>selezionate la root del team project o la folder in cui volete piazzare il tutto e create una nuova cartella a cui assegnerete il nome della vostra solution;</li>    <li>infine assegnate un nome diverso alla solution folder, ad esempio “trunk”;</li> </ul>  <span><a href="https://lh4.googleusercontent.com/-osb9e32Fpyk/TyvNNRVXgGI/AAAAAAAAA0o/ADZhoHkLFyE/image_14.png" rel="lightbox"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="https://lh5.googleusercontent.com/-2Ni-hX8X7Os/TyvNMqv7qnI/AAAAAAAAA0c/XY_sTeu_9yk/image_thumb_6.png" width="202" height="244"></a> </span><br>  <span>a questo punto potete fare fiduciosi “ok” e siete abili e arruolati, potete infine, cliccando con il tasto destro sulla folder “trunk” nel TeamExplorer, fare:</span><br>  <span><a href="https://lh6.googleusercontent.com/-wjOK4Lpj2Qw/TyvNObLxf4I/AAAAAAAAA00/u3Phw-5-MMo/image_16.png" rel="lightbox"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="https://lh4.googleusercontent.com/-RvUgqGiFeUs/TyvNN7dhG4I/AAAAAAAAA0s/DxG_-Drqi6M/image_thumb_7.png" width="244" height="107"></a></span><br>  <span>e aggiungere tutta la struttura delle folder di cui sopra.</span><br>  <span>Che sudata :-), questo lavoraccio però ci garantisce che ogni singolo dev del team, o noi stessi su una macchina diversa, con un semplicissimo “Get Latest” ci ritroviamo tutto al posto giusto, <a href="http://blogs.ugidotnet.org/topics/archive/2009/10/23/tales-of-a-visual-studio-addicted.aspx">quindi a prova di “scemo” che è il nostro obiettivo primario</a>.</span><br>  <blockquote>   <span><em>ndr</em>: la folder “build” e le due, o più, subfolder servono come directory di appoggio temporanee per automatizzare alcuni task di build, perchè metterle sotto source control? semplicemente perchè in questo modo siamo certi che la struttura, anche se vuota, sia tenuta sincronizzata tra le varie macchine;</span><br> </blockquote>  <span>Ricordatevi che tutto ciò che possiamo automatizzare alla lunga, ma anche alla corta :-), si traduce in un risparmio di risorse preziose.</span><br>  <span>.m</span><br>