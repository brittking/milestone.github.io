---
layout: post
title: 'RavenDB: start your engines'
date: '2012-01-27T16:18:00.001+01:00'
author: Mauro Servienti
tags:
- Software Mason
- RavenDB
modified_time: '2012-01-27T16:18:31.288+01:00'
thumbnail: http://lh5.ggpht.com/-3RbNNgc0ZUg/TyBpyaTL_UI/AAAAAAAAAI8/3sRxmchTNlM/s72-c/image_thumb4.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-6511237790974218081.post-4557154333131894128
blogger_orig_url: http://milestone.topics.it/2012/01/ravendb-start-your-engines.html
permalink: /2012/01/ravendb-start-your-engines.html
---

<p>This post is intended to be an introduction to <a href="http://ravendb.net/" target="_blank">RavenDB</a> and as all the introduction will deal with the basic steps required to setup the development machine.</p>  <p>The first step is to download the RavenDB binaries from the RavenDB site: <a href="http://ravendb.net/download#builds">http://ravendb.net/download#builds</a>.     <br /><em>Once downloaded remember to unblock the compressed archive before extracting files to the hard drive.</em></p>  <p><strong>First run</strong></p>  <p>After the file extraction the directory structure should be something like the following:</p>  <p><a href="http://lh6.ggpht.com/-778ZsdtXOA0/TyBpxqbb8rI/AAAAAAAAAI0/QVAgiES2L_g/s1600-h/image6.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh5.ggpht.com/-3RbNNgc0ZUg/TyBpyaTL_UI/AAAAAAAAAI8/3sRxmchTNlM/image_thumb4.png?imgmax=800" width="244" height="229" /></a></p>  <p><em>Figure: file and folder structure from RavenDB build 573.</em></p>  <p>There are 2 different server versions (the highlighted folders in the above figure):</p>  <ul>   <li>“Server” folder contains server binaries already setup to run as a console application or as a Windows service; </li>    <li>“Web” folder contains server binaries setup to run as an IIS hosted application; </li> </ul>  <p>During the development process the console version is a real life saver because it gives real time access to server logs. In order to start the console version it’s enough to jump into the server folder and double click on the Raven.Server.exe file.</p>  <p><a href="http://lh5.ggpht.com/-2F-3XBMvBYw/TyBpzqAyXVI/AAAAAAAAAJA/1gA83tuVU6E/s1600-h/image10.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh3.ggpht.com/-vlxyGeYGh0A/TyBp0CXepzI/AAAAAAAAAJM/I53RrN946tY/image_thumb7.png?imgmax=800" width="205" height="69" /></a></p>  <p>What happens is that the server starts, the first time it can take some time due to the operation performed to setup the environment fir the first time. Once the server is started the console should look like the following screenshot:</p>  <p><a href="http://lh6.ggpht.com/-Yp05aDPS1g8/TyBp2HaNWQI/AAAAAAAAAJU/a1qKFvySA64/s1600-h/image16.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh4.ggpht.com/-zCtfAZ4tvmo/TyBp3C176qI/AAAAAAAAAJc/3eu4isUr8Jk/image_thumb9.png?imgmax=800" width="244" height="127" /></a></p>  <p><em>Figure: the console running a RavenDB server instance.</em></p>  <p>Side note: you can be presented with the Windows Firewall authorization dialog, as the following:</p>  <p><a href="http://lh5.ggpht.com/-Dv8Wo5sCgOg/TyBp5QsPWhI/AAAAAAAAAJk/QnvsEosmpbc/s1600-h/image13.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh4.ggpht.com/-ft05sXh5AGA/TyBp6W96tWI/AAAAAAAAAJs/w2YHAz9X6nE/image_thumb8.png?imgmax=800" width="244" height="193" /></a></p>  <p>Obviously you need to give appropriate permissions if you need to access your local server from another machine.</p>  <p>The console immediately gives some important information:</p>  <ol>   <li>The data directory where data are stored; </li>    <li>The server url, host name and listening port; </li>    <li>The storage engine type, on Windows the default is Esent; </li> </ol>  <p><strong>And now?</strong></p>  <p>Once the server is running the first thing we can do is trying to connect using the builtin management studio, the studio is a Silverlight application that can be launched simply pointing the browser to the listening server Uri:</p>  <p><a href="http://lh4.ggpht.com/-vUj-HnD7jGY/TyBp8udl2UI/AAAAAAAAAJ0/1-P9tWz0A-Y/s1600-h/image19.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh4.ggpht.com/-DCGnghUcQCE/TyBp-bsaYuI/AAAAAAAAAJ8/ARBrNwdWRbg/image_thumb10.png?imgmax=800" width="244" height="98" /></a></p>  <p><em>Figure: the RavenDB management studio running in Chrome.</em></p>  <p>Obviously the database, the default database that is created at server startup, is empty. At the bottom of the “summary” page there is a button that starts the creation process of a bunch of sample data. After the creation of the sample data your collections should look something like:</p>  <p><a href="http://lh5.ggpht.com/-fEOdIkfHOEQ/TyBp_2NpfBI/AAAAAAAAAKE/rPy1UvJqyYw/s1600-h/image22.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh5.ggpht.com/-hxF0iV1TaJ0/TyBqAsiuI8I/AAAAAAAAAKM/6xQQ2kkzUwM/image_thumb11.png?imgmax=800" width="244" height="155" /></a></p>  <p><em>Figure: database collections just after the sample data creation process has completed.</em></p>  <p>The server console immediately confirms that something is going on at the server side:</p>  <p><a href="http://lh6.ggpht.com/-n816WFN8Yic/TyBqB_7qizI/AAAAAAAAAKU/L-EQs3gzJhQ/s1600-h/image25.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh3.ggpht.com/-X2q2Eg-Yx2E/TyBqC-cfU2I/AAAAAAAAAKc/QVLXqDxo6zw/image_thumb12.png?imgmax=800" width="244" height="127" /></a></p>  <p><em>Figure: the RavenDB server console showing real time logs.</em></p>  <p><strong>Are you “secure”?</strong></p>  <p>no…it’s not an Italian false friend, I’m pretty sure <img style="border-bottom-style: none; border-left-style: none; border-top-style: none; border-right-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Winking smile" src="http://lh5.ggpht.com/-2DQHXrxSFbI/TyBqDZGj6_I/AAAAAAAAAKg/WJL_Ac2UiVk/wlEmoticon-winkingsmile2.png?imgmax=800" /> One question that some readers could raise is: how can it be that the server let a connected, and apparently anonymous, application to write data?</p>  <p><strong>Well…</strong></p>  <p>The first thing we need to understand is the RavenDB security model: when running in the console mode the default security model is Windows authentication (oAuth is an option too) and the access level, the anonymous access level, can be controlled via the server configuration file:</p>  <p><a href="http://lh3.ggpht.com/-kVVlsuQuluA/TyLAP9stQxI/AAAAAAAAALM/L1wGHhybkOI/s1600-h/image262.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh3.ggpht.com/-4pLPtRqZ68A/TyBqFeFJSuI/AAAAAAAAALU/iZaHkTOggnc/image26_thumb1.png?imgmax=800" width="244" height="109" /></a></p>  <p><em>Figure: the configuration file showing the Raven/AnonymousAccess configuration setting.</em></p>  <p>The anonymous access setting support 3 different values:</p>  <ol>   <li>None: anonymous access is not allowed; </li>    <li>Get: anonymous clients has just read-only permissions; </li>    <li>All: anonymous clients are full trusted clients and can do everything; </li> </ol>  <p><strong>So?</strong></p>  <p>As we can see the current running value is “Get”, but since the studio is connecting to localhost it is basically running in “intranet” mode and thus is passing the current user credentials to the RavenDB server that, using Windows authentication, can trust the incoming requests: that’s why we could create data even if no one asked us any credential.</p>  <p>Enough for the moment…next time we’ll see how to connect to the server using our own application. </p>  <p>.m</p>  
